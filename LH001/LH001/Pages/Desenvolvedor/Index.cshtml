@page
@model LH001.Pages.Desenvolvedor.IndexModel
@{
    Layout = "_Layout";
}
<div style="width: 93%;padding-left: 7%;">
    <form method="post">
        <div class="row">

            <div class="col-3">
                <label for="exampleInputEmail1" class="form-label">Id:</label>
                <input type="number" id="IdBusca" class="form-control" value="@Model.modalBusca.Id" aria-describedby="busca por id">
            </div>
            <div class="col-8">
                <label for="exampleInputEmail1" class="form-label">Nome:</label>
                <input type="text" id="NomeBusca" class="form-control" value="@Model.modalBusca.Nome" aria-describedby="busca por nome">
            </div>
        </div>
        <div class="col-12" style="padding-top: 30px;">
            <p class="fa-pull-right">
                <a href="@Url.Action("Index", "Desenvolvedor")" class="btn btn-secondary"> Limpar</a>
                <a onclick="Buscar();" class="btn btn-primary"><i class="fas fa-search"></i> Pesquisar</a>
            </p>
        </div>
    </form>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th scope="col">Id</th>
                <th scope="col">Nome</th>
            </tr>
        </thead>
        <tbody id="tbBusca">
            @foreach (var item in Model.modalResult)
            {
                <tr>
                    <th scope="row">@item.Id</th>
                    <td>@item.Nome</td>
                </tr>
            }
        </tbody>
    </table>
    <div class="col-12">
        <p class="fa-pull-right">
            <a class="btn btn-success" href="/Desenvolvedor/Adicionar"><i class="fas fa-plus"></i> Adicionar</a>
        </p>
    </div>
</div>

@section Scripts {
    <script asp-append-version="true">

        function Buscar() {
            $.getJSON("?handler=Buscar&id=" + $("#IdBusca").val() + "&nome=" + $("#NomeBusca").val(), (data) => {
                $("#tbBusca").empty();
                if (data.result.length != 0) {
                    $.each(data.result, function (key, value) {
                        $("#tbBusca").append(
                            '<tr>'
                            + '<td>' + value.id + '</td>'
                            + '<td>' + value.nome + '</td>'
                            //+ '<td>' + '<input class="checkVinculo" data-val="true" type="checkbox" value="false" onclick="SelecionarVinculo(this,' + value.cdCbo + ',' + value.cdTipoVinculo + ')">' + '</td>'
                            + '</tr>'
                        );
                    });
                    //$("#divVinculoBind").append('<input class="form-control" type="number" data-val="true" id="CdTipoVinculo" name="CdTipoVinculo" value="' + value.cdTipoVinculo + '">');
                }
            });
        }

        //$("#" + 'FormDesenvolvedor').submit(function (event) {
        //    event.preventDefault(); //prevent default action
        //    var post_url = $(this).attr("action"); //get form action url
        //    var request_method = $(this).attr("method"); //get form GET/POST method
        //    var form_data = $(this).serialize(); //Encode form elements for submission
        //    console.log(post_url);
        //    console.log(request_method);
        //    console.log(form_data);
        //    $.ajax({
        //        url: post_url,
        //        type: request_method,
        //        data: form_data
        //    }).done(function (data) { //
        //        if (data.ok) {
        //            document.location.reload(true);

        //        }
        //        else {
        //            if (data.mensagem != null) {
        //                ExibirModal(data.mensagem, true, "Atenção!", function () {
        //                    setTimeout(function () {
        //                        if (data.ok) { }
        //                        else {
        //                            var firstInput = $(":input:not(input[type=button],input[type=submit],button):visible:first", form);
        //                            firstInput.focus();

        //                        }
        //                    }, 400);
        //                })

        //            }

        //        }
        //    });
        //});
    </script>
}